#!/usr/bin/env zsh

### ALIASES ###
# Default modifiers
alias clear='printf "\033c"'
alias cower='cower --color auto'
alias df='df -kTh'
alias du='du -kh'
alias free='free -h'
alias iotop='sudo iotop -o'
alias pdflatex='pdflatex -halt-on-error'
alias pgrep='pgrep -afl'
alias shred='shred -uv'
alias sudo='sudo -EH'
alias valgrind='valgrind --track-origins=yes'
alias vi='vim'
alias view='vim -Rp'
alias vim='vim -p'
alias which='which -a'
alias yt-dl='noglob youtube-dl -o \%\(title\)s.\%\(ext\)s'
alias xsnow='xsnow -nokeepsnow -notrees'

# Modifiers on file operations
# * Verbosity so you know what's going on
# * Prevent rm from removing file systems
# * Prevent chmod from operating on /
alias cp='cp -v'
alias ln='ln -v'
alias mv='mv -v'

# Disabled commands
alias dm-tool='command-disabled'

# Platform-specific commands
case "$(uname)" in
    Darwin)
        alias chmod='chmod -v'
        alias ls='ls -GF'
        alias rm='rm -v'
        ;;
    Linux)
        alias chmod='chmod -v --preserve-root'
        alias ls='ls -hHF --color=tty'
        alias rm='rm -v --one-file-system'
        alias grep='grep --color'
        alias egrep='egrep --color=auto'
        alias fgrep='fgrep --color=auto'
        alias open='xdg-open'
        ;;
esac

# Colorize output
alias diff='colordiff'
alias less='less -r'

# Derivative commands
alias cpa='cp -a'
alias la='ls -A'
alias latr='ls -Altr'
alias lc='ls -ltcr'      # Sort by change time, most recent last
alias lk='ls -lSr'       # Sort by size, biggest last
alias ll='ls -l'
alias lla='ls -Al'
alias lm='ll | less'
alias ltr='ls -ltr'      # Sort by date, most recent last
alias lu='ls -ltur'      # Sort by access time, most recent last
alias lxb='ls -lXB'      # Sort by extension

# Shortcut commands
alias allgrp='cut -d: -f1 /etc/group'
alias allusr='cut -d: -f1 /etc/passwd'
alias checkip='curl ifconfig.me'
alias define='sdcv'
alias doc2pdf='libreoffice --headless --invisible --norestore --convert-to pdf'
alias dtail='dmesg | tail'
alias jctl='journalctl'
alias keyart='ssh-keygen -lv -f'
alias lsnet='ls /sys/class/net'
alias sctl='sudo -E systemctl'
alias srcrc='source ~/.zshrc'
alias sshagent='eval $(ssh-agent -t 15m)'
alias vigtk='sudo vi -p /usr/share/gtk-2.0/gtkrc /usr/share/gtk-3.0/settings.ini'
alias vii3='vim ~/.config/i3/config'
alias virc='vim -p ~/.zshrc ~/.zshrc.d/*'
alias vibrc='vim ~/.bashrc'
alias vimrc='vim ~/.vimrc'
alias week='date +%V'
alias ytmp3='noglob youtube-dl -o %\(title\)s.%\(ext\)s --extract-audio'
alias md='mkdir -p'

# gcalcli shortcuts
alias calm='gcalcli calm'
alias calw='gcalcli calw'
alias agenda='gcalcli agenda'
alias gadd='gcalcli add --calendar "grawcards@gmail.com"'

# File navigation commands
alias largest="find . -printf '%s %p\n' | sort -nr | head"
alias smallest="find . -printf '%s %p\n' | sort -nr | tail"

# For fun
alias chanstamp='date +%s%3N'
alias maze='Z=╱╲;for((;;)){ printf ${Z:RANDOM&1:1};sleep .01;};unset Z'
alias mpvnc='mpv --speed=1.5 --audio-pitch-correction=no --no-video'
alias mpvac='mpv --speed=0.67 --audio-pitch-correction=no --no-video'

### FUNCTIONS ###
# Shortcut commands
cdls() { cd "$@" && ls; }
cdmv() { mv "$1" "$2" && cd "$2"; }
catls() { [[ -d "$1" ]] && ls "$1" || cat "$1"; }
countf() { /usr/bin/ls -1 "$@" | wc -l; }
digq() { dig "$@" | grep 'Query time'; }
lsicon() { ls /usr/share/icons/Numix-Circle/scalable/apps | grep "$1"; }
mkcd() { mkdir -p "$@" && cd "$@"; }
pacbin() { pacman -Ql "$1" | grep --color=never bin; }
pexec() { echo $@; $@; }
pls() { sudo -- "${SHELL:-zsh}" -c "$(fc -ln -1)"; }
strerror() { python -c "import os; print(os.strerror($1))"; }
trash() { [[ $# -eq 0 ]] && trash-list || trash-put $@; }

# Colorize text
red()    { printf "\e[31m\e[1m"$@"\e[0m"; }
green()  { printf "\e[32m\e[1m"$@"\e[0m"; }
blue()   { printf "\e[34m\e[1m"$@"\e[0m"; }
redl()   { printf "\e[31m"$@"\e[0m"; }
greenl() { printf "\e[32m"$@"\e[0m"; }
bluel()  { printf "\e[34m"$@"\e[0m"; }

# Hash checkers
md5check()    { [[ $(md5sum "$2"    | cut -d' ' -f1) == "$1" ]] && green '[OK]' || red '[FAIL]'; }
sha1check()   { [[ $(sha1sum "$2"   | cut -d' ' -f1) == "$1" ]] && green '[OK]' || red '[FAIL]'; }
sha256check() { [[ $(sha256sum "$2" | cut -d' ' -f1) == "$1" ]] && green '[OK]' || red '[FAIL]'; }

